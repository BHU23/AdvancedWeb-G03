<div class="card no-border p-3">
  <div class="d-flex align-items-center">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-luggage me-3 text-primary" viewBox="0 0 16 16">
      <path d="M2.5 1a.5.5 0 0 0-.5.5V5h-.5A1.5 1.5 0 0 0 0 6.5v7a1.5 1.5 0 0 0 1 1.415v.335a.75.75 0 0 0 1.5 0V15H4v-1H1.5a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5V7h1v-.5A1.5 1.5 0 0 0 6.5 5H6V1.5a.5.5 0 0 0-.5-.5zM5 5H3V2h2z"/>
      <path d="M3 7.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0zM11 6a1.5 1.5 0 0 1 1.5 1.5V8h2A1.5 1.5 0 0 1 16 9.5v5a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 14.5v-5A1.5 1.5 0 0 1 6.5 8h2v-.5A1.5 1.5 0 0 1 10 6zM9.5 7.5V8h2v-.5A.5.5 0 0 0 11 7h-1a.5.5 0 0 0-.5.5M6 9.5v5a.5.5 0 0 0 .5.5H7V9h-.5a.5.5 0 0 0-.5.5m7 5.5V9H8v6zm1.5 0a.5.5 0 0 0 .5-.5v-5a.5.5 0 0 0-.5-.5H14v6z"/>
    </svg>
    <h2 class="mb-0">วางแผนการท่องเที่ยว</h2>
  </div>
</div>


<div class="card mt-2 no-border">
  <div class="card-body">
    <form [formGroup]="planingForm" (ngSubmit)="onSubmit()">
      <div class="mb-3">
        <label for="tripName" class="form-label">Trip Title</label>
        <input type="text" class="form-control" id="tripName" formControlName="tripName" placeholder="กรุณากรอกชื่อทริป">
        <div *ngIf="tripName?.invalid && (tripName?.dirty || tripName?.touched)" class="text-danger">
          <small *ngIf="tripName?.errors?.['required']">กรุณากรอกชื่อทริป</small>
          <small *ngIf="tripName?.errors?.['minlength']">ชื่อทริปต้องมีความยาวอย่างน้อย 3 ตัวอักษร</small>
          <small *ngIf="tripName?.errors?.['maxlength']">ชื่อทริปต้องมีความยาวไม่เกิน 100 ตัวอักษร</small>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <label for="startDate" class="form-label">Start Date</label>
          <input type="date" class="form-control" id="startDate" formControlName="startDate">
          <div *ngIf="startDate?.invalid && (startDate?.dirty || startDate?.touched)" class="text-danger">
            <small *ngIf="startDate?.errors?.['required']">กรุณาเลือกวันที่เริ่มต้น</small>
            <small *ngIf="startDate?.errors?.['pastDate']">วันที่เริ่มต้นต้องไม่เป็นวันในอดีต</small>
          </div>
        </div>
        <div class="col-md-6">
          <label for="endDate" class="form-label">End Date</label>
          <input type="date" class="form-control" id="endDate" formControlName="endDate">
          <div *ngIf="endDate?.invalid && (endDate?.dirty || endDate?.touched)" class="text-danger">
            <small *ngIf="endDate?.errors?.['required']">กรุณาเลือกวันที่สิ้นสุด</small>
            <small *ngIf="endDate?.errors?.['pastDate']">วันที่สิ้นสุดต้องไม่เป็นวันในอดีต</small>
          </div>
        </div>
      </div>

      <div class="mb-3">
        <label for="budget" class="form-label">Budget</label>
        <select class="form-select" id="budget" formControlName="budget">
          <option value="">เลือกช่วงงบประมาณ</option>
          <option value="0-5000">0 - 5,000 บาท</option>
          <option value="5001-10000">5,001 - 10,000 บาท</option>
          <option value="10001-20000">10,001 - 20,000 บาท</option>
          <option value="20001-50000">20,001 - 50,000 บาท</option>
          <option value="50001-100000">50,001 - 100,000 บาท</option>
          <option value="100001+">100,001 บาทขึ้นไป</option>
        </select>
        <div *ngIf="budget?.invalid && (budget?.dirty || budget?.touched)" class="text-danger">
          <small *ngIf="budget?.errors?.['required']">กรุณาเลือกช่วงงบประมาณ</small>
        </div>
      </div>

      <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <textarea class="form-control" id="description" rows="3" formControlName="description" placeholder="กรอกรายละเอียดเพิ่มเติม (ถ้ามี)"></textarea>
        <div *ngIf="description?.invalid && (description?.dirty || description?.touched)" class="text-danger">
          <small *ngIf="description?.errors?.['maxlength']">รายละเอียดต้องมีความยาวไม่เกิน 500 ตัวอักษร</small>
        </div>
      </div>

      <!-- Start Date, End Date, Budget, Description Fields -->

      <div class="d-flex justify-content-end mt-4">
        <button type="button" class="btn btn-secondary custom-width" (click)="resetForm()" [disabled]="isSubmitting">
          รีเซ็ต
        </button>
        <button type="submit" class="btn btn-primary me-2 custom-width">
          บันทึก
        </button>
      </div>
          
    </form>

    <!-- Alerts for Success and Error -->
     
    <div class="mt-3">
      <div *ngIf="successMessage" class="alert alert-success alert-dismissible fade show" role="alert">
        {{ successMessage }}
        <button type="button" class="btn-close" (click)="closeAlert('success')" aria-label="Close"></button>
      </div>
      <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert">
        {{ errorMessage }}
        <button type="button" class="btn-close" (click)="closeAlert('error')" aria-label="Close"></button>
      </div>
    </div>
</div>
