<div class="container mt-4">
  <form [formGroup]="reviewForm" (ngSubmit)="onSubmit()">
    <!-- Review Form -->
    <h2>Create Review</h2>

    <div class="form-group">
      <label for="topic">Topic <span style="color: red">*</span></label>
      <input
        type="text"
        id="topic"
        formControlName="topic"
        class="form-control"
        placeholder="Enter review topic"
      />
    </div>

    <div class="form-group">
      <label for="image" class="form-label">
        Upload Image <span style="color: red">*</span>
      </label>
      <div class="custom-file-upload">
        <label for="image" class="upload-btn">
          <i class="fa fa-cloud-upload"></i> Choose a file
        </label>
        <input
          type="file"
          id="image"
          (change)="onFileChange($event)"
          class="file-input"
        />
        <span class="file-name" *ngIf="fileName">{{ fileName }}</span>
      </div>
    </div>

    <div class="form-group">
      <label for="rating">Rating <span style="color: red">*</span></label>
      <div class="star-rating">
        <input type="radio" id="star5" formControlName="rating" value="5" />
        <label for="star5" title="5 stars">&#9733;</label>
        <input type="radio" id="star4" formControlName="rating" value="4" />
        <label for="star4" title="4 stars">&#9733;</label>
        <input type="radio" id="star3" formControlName="rating" value="3" />
        <label for="star3" title="3 stars">&#9733;</label>
        <input type="radio" id="star2" formControlName="rating" value="2" />
        <label for="star2" title="2 stars">&#9733;</label>
        <input type="radio" id="star1" formControlName="rating" value="1" />
        <label for="star1" title="1 star">&#9733;</label>
      </div>
      <p *ngIf="reviewForm.value.rating">
        You rated: {{ reviewForm.value.rating }} stars
      </p>
    </div>

    <div class="form-group">
      <label for="description"
        >Description <span style="color: red">*</span></label
      >
      <textarea
        id="description"
        formControlName="description"
        class="form-control"
      ></textarea>
    </div>

    <div class="form-group">
      <label for="trip_date">Trip Date <span style="color: red">*</span></label>
      <input
        type="date"
        id="trip_date"
        formControlName="trip_date"
        class="form-control"
      />
    </div>

    <div class="form-group">
      <label for="timeRecommend"
        >Recommend Time <span style="color: red">*</span></label
      >
      <select
        id="timeRecommend"
        formControlName="timeRecommend"
        class="form-control"
      >
        <option value="">Select time</option>
        <option value="morning">Morning</option>
        <option value="afternoon">Afternoon</option>
        <option value="evening">Evening</option>
        <option value="night">Night</option>
      </select>
    </div>

    <div class="form-group">
      <label for="cost">Cost <span style="color: red">*</span></label>
      <input
        type="number"
        id="cost"
        formControlName="cost"
        class="form-control"
        placeholder="Enter cost"
      />
    </div>

    <!-- Nested FormGroup for Place Section -->
    <h3>Place</h3>
    <div formGroupName="placeId">
      <!-- Reference the 'placeId' formGroup -->
      <div class="form-group">
        <label for="name">Place Name <span style="color: red">*</span></label>
        <input
          type="text"
          id="name"
          formControlName="name"
          class="form-control"
          placeholder="Enter place name"
        />
      </div>

      <div class="form-group">
        <label for="description"
          >Place Description <span style="color: red">*</span></label
        >
        <textarea
          id="description"
          formControlName="description"
          class="form-control"
        ></textarea>
      </div>

      <div class="form-group">
        <label for="address">Address <span style="color: red">*</span></label>
        <input
          type="text"
          id="address"
          formControlName="address"
          class="form-control"
          placeholder="Enter address"
          />
        </div>
        
        <div class="form-group">
          <label for="category">Category</label>
          <input
            type="text"
            id="category"
            formControlName="category"
            class="form-control"
            placeholder="Enter category"
          />
        </div>

      <div class="form-group">
        <label for="map">Select Location (Map Integration Placeholder)</label>
        <div
          class="map-container"
          style="height: auto; background-color: #f0f0f0"
        >
          <google-map
            id="map"
            height="600px"
            width="100%"
            [options]="options"
            (mapClick)="onMapClick($event)"
          >
            <ng-container *ngIf="markerPosition">
              <map-advanced-marker
                #markerElem="mapAdvancedMarker"
                [position]="markerPosition"
              />
            </ng-container>
          </google-map>
        </div>
      </div>

      <div class="form-group">
        <label for="latitude">Latitude</label>
        <input
          type="number"
          id="latitude"
          formControlName="latitude"
          class="form-control"
          readonly
        />
      </div>

      <div class="form-group">
        <label for="longitude">Longitude</label>
        <input
          type="number"
          id="longitude"
          formControlName="longitude"
          class="form-control"
          readonly
        />
      </div>

      <div class="form-group">
        <label for="googleMapsUrl">Google Maps URL</label>
        <input
          type="text"
          id="googleMapsUrl"
          formControlName="googleMapsUrl"
          class="form-control"
          readonly
        />
      </div>

    </div>
    <!-- End of placeId FormGroup -->

    <button
      type="submit"
      class="btn btn-primary mt-3"
      [disabled]="reviewForm.invalid"
    >
      Submit
    </button>
  </form>
</div>
